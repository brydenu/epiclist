{% extends 'base.html' %}

{% block title %}{{user.username}}{% endblock %}

{% block content %}
<div class="jumbotron mt-2" id="profile-jumbo">
    <div class="row">
        <div class="col-2">
            <img src="{{user.image_url}}" alt="Image of {{user.username}}" id="user-profile-image">
        </div>
        <div class="col-10 align-self-center">
            <h1 class="display-4">{{user.username}}</h1>
        </div>
    </div>
</div>
<div class="row m-2">
    <div class="col-4">
        <div class="card">
            <div class="container p-3">
                <p>Favorite Character: {{user.favorite_character}}</p>
                <p>Followers: {{user.followers | length}}</p>
                <p>Following: {{user.following | length}}</p>
                <p>Lists: {{user.lists | length}}</p>
                <p><small><a href="/users/{{g.user.username}}/edit">Edit Profile</a></small></p>
            </div>
        </div>
        <div class="card">
            <div class="container p-3">
                <h3 class="h3">Bio:</h3>
                <p>{{user.bio}}</p>
            </div>
        </div>
    </div>
    <div class="col-8 jumbotron" id="profile-lists-jumbo">
        <h1 class="h1 text-center">Lists by {{user.username}}</h1>
        {% for dict_item in lists %}
        <div class="card m-2 text-center">
            <div>
                <div class="h3 pt-4"><a href="/lists/{{dict_item.list.id}}">{{ dict_item.list.title }}</a>
                </div>
                <div class="small"><a href="/users/{{dict_item.list.user.username}}">By
                        {{ dict_item.list.user.username }}</a></div>
                <hr>
            </div>
            <div class="row pb-3 justify-content-around">
                {% if dict_item.characters | length < 5 %}
                {% for character_info in dict_item.characters %}
                <div class="col-2 m-3">
                    <p>{% if dict_item.list.is_ranked %}{{character_info.rank}}.
                        {% endif %}{{ character_info.character.name }}
                    </p>
                    <img class="char-image" src="{{character_info.character.image_url}}"
                        alt="Picture of {{character_info.character.name}}">
                </div>
                {% endfor %}
                {% else %}
                {% for character_info in dict_item.characters %}
                {% if loop.index < 4 %}
                <div class="col-2 m-3">
                    <p>{% if dict_item.list.is_ranked %}{{character_info.rank}}.
                        {% endif %}{{ character_info.character.name }}
                    </p>
                    <img class="char-image" src="{{character_info.character.image_url}}"
                        alt="Picture of {{character_info.character.name}}">
                </div>
                {% endif %}
                {% endfor %}
                <div>
                    <h1 class="big-dots">. . . </h1>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}